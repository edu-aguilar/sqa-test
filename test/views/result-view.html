<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>my-view1</title>

  <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../bower_components/web-component-tester/browser.js"></script>

  <!-- Import the element to test -->
  <link rel="import" href="../../src/result-view.html">
</head>

<body>
  <test-fixture id="formValidTest">
    <template>
          <result-view result-message="welcome message" ></result-view>
    </template>
  </test-fixture>

  <test-fixture id="formInValidTest">
    <template>
      <result-view></result-view>
    </template>
  </test-fixture>

  <test-fixture id="presencialTest">
    <template>
      <result-view presencial></result-view>
    </template>
  </test-fixture>

  <script>
    suite('landing view tests', function() {

      test('form with valid field', function() {
        const resultView = fixture('formValidTest');
        const resultMessage = resultView.shadowRoot.querySelector('.box-wrapper');
        resultView.user = {
                            name: 'candidato1',
                            surname: 'ape2',
                            email: 'candidato@soprasteria.com',
                          };
        assert.equal(resultView.$.resultForm.hidden, false);                    
        assert.equal(resultMessage.firstElementChild.innerText, "welcome message");                      
        assert.equal(resultView.presencial, false);
        assert.equal(resultView.isValid, true);
      });

      test('form with invalid field', function() {
        let resultView = fixture('formInValidTest');
        const resultMessage = resultView.shadowRoot.querySelector('.box-wrapper');
        resultView.user = {
                            name: '',
                            surname: 'ape2',
                            phone: '999999999',
                            email: 'candidato@soprasteria.com',
                          };
        assert.equal(resultView.$.resultForm.hidden, false); 
        assert.equal(resultMessage.firstElementChild.innerText, "");
        assert.equal(resultView.presencial, false);                         
        assert.equal(resultView.isValid, false);
      });

      test('when is presencial the form have to be hidden', function() {
        let resultView = fixture('presencialTest'); 
        assert.equal(resultView.$.resultForm.hidden, true); 
        assert.equal(resultView.presencial, true);                         
        assert.equal(resultView.isValid, false);
      });

    });
  </script>
</body>
</html>