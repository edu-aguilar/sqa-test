<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

  <title>my-view1</title>

  <script src="../../bower_components/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../bower_components/web-component-tester/browser.js"></script>

  <!-- Import the element to test -->
  <link rel="import" href="../../src/result-view.html">
</head>

<body>
  <test-fixture id="formValidTest">
    <template>
          <result-view result-message="welcome message" ></result-view>
    </template>
  </test-fixture>

  <test-fixture id="formInValidTest">
    <template>
      <result-view></result-view>
    </template>
  </test-fixture>

  <test-fixture id="presencialTest">
    <template>
      <result-view presencial></result-view>
    </template>
  </test-fixture>


  <script>

    suite('landing view tests', function() {
      test('form with valid field', function() {
        const resultView = fixture('formValidTest');
        const resultMessage = resultView.shadowRoot.querySelector('.box-wrapper');
        resultView.user = {
                            name: 'candidato1',
                            surname: 'ape2',
                            email: 'candidato@soprasteria.com',
                          };
                          debugger;
        assert.equal(resultView.$.resultForm.hidden, false);                    
        assert.equal(resultMessage.firstElementChild.innerText, "welcome message");                      
        assert.equal(resultView.presencial, false);
        assert.equal(resultView.isValid, true);
      });

      test('form with invalid field', function() {
        let resultView = fixture('formInValidTest');
        const resultMessage = resultView.shadowRoot.querySelector('.box-wrapper');

        resultView.user = {
                            name: '',
                            surname: 'ape2',
                            phone: '999999999',
                            email: 'candidato@soprasteria.com',
                          };
        assert.equal(resultView.$.resultForm.hidden, false); 
        assert.equal(resultMessage.firstElementChild.innerText, "");
        assert.equal(resultView.presencial, false);                         
        assert.equal(resultView.isValid, false);
      });

      test('when is presencial the form have to be hidden', function() {
        let resultView = fixture('presencialTest'); 
        debugger;
        assert.equal(resultView.$.resultForm.hidden, true); 
        assert.equal(resultView.presencial, true);                         
        assert.equal(resultView.isValid, false);
      });
    });
  </script>
</body>

</html>